<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KinCircle User Manual</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --ink: #0f172a;
      --muted: #475569;
      --accent: #0d9488;
      --accent-2: #14b8a6;
      --accent-soft: #f0fdfa;
      --line: #e2e8f0;
      --paper: #ffffff;
      --bg-start: #f8fafc;
      --bg-end: #eef2f7;
      --warning: #f59e0b;
      --danger: #ef4444;
      --success: #10b981;
      --shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
    }

    * { box-sizing: border-box; }

    html { scroll-behavior: smooth; }

    body {
      margin: 0;
      color: var(--ink);
      background: radial-gradient(1200px 600px at 10% -10%, #e0f2fe 0%, transparent 55%),
                  radial-gradient(900px 500px at 90% -20%, #ccfbf1 0%, transparent 50%),
                  linear-gradient(180deg, var(--bg-start), var(--bg-end));
      font-family: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      line-height: 1.6;
    }

    h1, h2, h3, h4 {
      font-family: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      font-weight: 600;
      letter-spacing: -0.01em;
      margin: 0 0 0.6rem 0;
    }

    p { margin: 0 0 0.9rem 0; color: var(--muted); }

    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }

    .topbar {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--line);
    }

    .topbar-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-family: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      font-weight: 700;
      font-size: 1.4rem;
      color: var(--accent);
    }

    .tag {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      padding: 0.2rem 0.5rem;
      background: var(--accent-soft);
      border: 1px solid #a7f3d0;
      border-radius: 999px;
      color: var(--accent);
    }

    .meta {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .button {
      border: 1px solid var(--accent);
      color: var(--accent);
      background: transparent;
      padding: 0.5rem 0.9rem;
      border-radius: 999px;
      font-size: 0.85rem;
      cursor: pointer;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1.5rem 4rem;
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 2rem;
    }

    .toc {
      position: sticky;
      top: 90px;
      align-self: start;
      background: var(--paper);
      border: 1px solid var(--line);
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .toc-header {
      padding: 1rem 1.25rem;
      background: #f1f5f9;
      border-bottom: 1px solid var(--line);
      font-family: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      font-weight: 600;
      color: var(--ink);
    }

    .toc a {
      display: block;
      padding: 0.6rem 1.25rem;
      color: var(--muted);
      font-size: 0.95rem;
      border-left: 3px solid transparent;
    }

    .toc a.active {
      background: #f0fdfa;
      color: var(--accent);
      border-left-color: var(--accent);
      font-weight: 600;
    }

    main {
      background: var(--paper);
      border: 1px solid var(--line);
      border-radius: 20px;
      padding: 2rem 2.5rem;
      box-shadow: var(--shadow);
    }

    section { margin-bottom: 2.5rem; }

    .hero {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
    }

    .card {
      padding: 1rem 1.2rem;
      border: 1px solid var(--line);
      border-radius: 14px;
      background: #ffffff;
    }

    .callout {
      padding: 1rem 1.2rem;
      border-radius: 12px;
      border-left: 4px solid var(--accent);
      background: #f0fdfa;
      margin: 1rem 0;
    }

    .callout.warning {
      border-left-color: var(--warning);
      background: #fff7ed;
    }

    .callout.danger {
      border-left-color: var(--danger);
      background: #fef2f2;
    }

    .figure {
      margin: 1.5rem 0;
      text-align: center;
    }

    .figure img {
      max-width: 100%;
      border-radius: 16px;
      border: 1px solid var(--line);
      box-shadow: var(--shadow);
    }

    .caption {
      font-size: 0.85rem;
      color: #64748b;
      margin-top: 0.5rem;
    }

    .pill {
      display: inline-block;
      padding: 0.2rem 0.55rem;
      border-radius: 999px;
      font-size: 0.75rem;
      background: #f8fafc;
      border: 1px solid var(--line);
      color: var(--muted);
    }

    .grid-two {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.2rem;
    }

    .table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.95rem;
    }

    .table th,
    .table td {
      padding: 0.75rem 0.9rem;
      border-bottom: 1px solid var(--line);
      text-align: left;
    }

    .table th { background: #f8fafc; color: #64748b; font-weight: 600; }

    .diagram {
      margin: 1rem 0;
      background: #f8fafc;
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 1rem;
      text-align: center;
    }

    footer {
      margin-top: 2rem;
      padding: 1.5rem;
      text-align: center;
      color: #94a3b8;
      font-size: 0.85rem;
    }

    .hr { border-top: 1px solid var(--line); margin: 2rem 0; }

    @media (max-width: 980px) {
      .container { grid-template-columns: 1fr; }
      .toc { position: relative; top: 0; }
    }

    @media print {
      body { background: #ffffff; }
      .topbar, .toc { display: none; }
      .container { padding: 0; }
      main { box-shadow: none; border: none; }
      a { color: inherit; text-decoration: none; }
    }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div>
        <div class="brand">KinCircle <span class="tag">User Manual</span></div>
        <div class="meta">Version 1.2 · Updated January 31, 2026 · App v0.1.0</div>
      </div>
      <button class="button" onclick="window.print()">Print / Save PDF</button>
    </div>
  </div>

  <div class="container">
    <aside class="toc">
      <div class="toc-header">Contents</div>
      <nav>
        <a class="toc-link" href="#introduction">1. Introduction</a>
        <a class="toc-link" href="#quick-start">2. Quick Start</a>
        <a class="toc-link" href="#navigation">3. Navigation Overview</a>
        <a class="toc-link" href="#dashboard">4. Care Ledger Dashboard</a>
        <a class="toc-link" href="#add-entries">5. Add Entries (Expense & Care Hours)</a>
        <a class="toc-link" href="#ledger-reports">6. Ledger & Reports</a>
        <a class="toc-link" href="#care-schedule">7. Care Schedule</a>
        <a class="toc-link" href="#help-calendar">8. Help Calendar</a>
        <a class="toc-link" href="#recurring">9. Recurring Expenses</a>
        <a class="toc-link" href="#medications">10. Medications</a>
        <a class="toc-link" href="#ask-kin">11. Ask Kin (AI Assistant)</a>
        <a class="toc-link" href="#medicaid">12. Medicaid Look-Back Auditor</a>
        <a class="toc-link" href="#vault">13. Document Vault & Emergency Mode</a>
        <a class="toc-link" href="#family">14. Family Circle & Roles</a>
        <a class="toc-link" href="#settings">15. Settings, Privacy & Security</a>
        <a class="toc-link" href="#compliance-mode">16. Compliance Mode (HIPAA-ready)</a>
        <a class="toc-link" href="#sync">17. Data Sync & Backups</a>
        <a class="toc-link" href="#troubleshooting">18. Troubleshooting</a>
        <a class="toc-link" href="#disclaimers">19. Compliance & Disclaimers</a>
      </nav>
    </aside>

    <main>
      <section id="introduction" class="hero">
        <h1>Welcome to KinCircle</h1>
        <p>KinCircle is a caregiving ledger that helps families track expenses, value care hours, coordinate tasks, and store critical documents. It is designed to bring transparency and fairness to family care and to help prepare for Medicaid look-back reviews.</p>
        <div class="cards">
          <div class="card">
            <h3>For caregivers</h3>
            <p>Log expenses and care hours, keep a shared schedule, and document contributions.</p>
          </div>
          <div class="card">
            <h3>For families</h3>
            <p>See a clear, shared ledger of who contributed what, and export reports when needed.</p>
          </div>
          <div class="card">
            <h3>For emergencies</h3>
            <p>Keep essential documents in one place and enable an emergency-friendly view when seconds matter.</p>
          </div>
        </div>
        <div class="callout">
          <strong>Compatibility:</strong> Recommended on modern Chrome, Edge, or Safari. The interface adapts to mobile and desktop.
        </div>
      </section>

      <div class="hr"></div>

      <section id="quick-start">
        <h2>Quick Start</h2>
        <p>First-time setup takes a couple of minutes. The onboarding wizard guides you through:</p>
        <ol>
          <li>Patient name (who you are caring for)</li>
          <li>Hourly rate (how care hours are valued)</li>
          <li>Security PIN (enables encryption and auto-lock)</li>
        </ol>
        <div class="figure">
          <img src="mobile.png" alt="KinCircle mobile view">
          <div class="caption">Figure 1: Mobile view of the Care Ledger</div>
        </div>
        <div class="callout warning">
          <strong>Important:</strong> Local data is encrypted only after you set a PIN. Without a PIN, data remains unencrypted on the device.
        </div>
      </section>

      <section id="navigation">
        <h2>Navigation Overview</h2>
        <p>KinCircle uses a left sidebar for primary workflows:</p>
        <div class="grid-two">
          <div class="card">
            <h4>Primary</h4>
            <ul>
              <li>Care Ledger</li>
              <li>Care Schedule</li>
              <li>Help Calendar</li>
              <li>Add Entry</li>
              <li>Medications</li>
              <li>Ask Kin (AI)</li>
            </ul>
          </div>
          <div class="card">
            <h4>Tools & Settings</h4>
            <ul>
              <li>Ledger & Reports</li>
              <li>Recurring Expenses</li>
              <li>Document Vault</li>
              <li>Family Circle</li>
              <li>Settings</li>
            </ul>
          </div>
        </div>
      </section>

      <section id="dashboard">
        <h2>Care Ledger Dashboard</h2>
        <p>The dashboard summarizes contributions for the care recipient and shows the balance across family members.</p>
        <div class="figure">
          <img src="dashboard.png" alt="KinCircle Care Ledger dashboard">
          <div class="caption">Figure 2: Care Ledger Dashboard showing contribution balance</div>
        </div>
        <div class="cards">
          <div class="card">
            <h4>Total Expenses</h4>
            <p>Sum of all logged expenses.</p>
          </div>
          <div class="card">
            <h4>Care Hours Value</h4>
            <p>Total care time converted to dollar value using your hourly rate.</p>
          </div>
          <div class="card">
            <h4>Contribution Balance</h4>
            <p>Visual comparison of each family member's contributions.</p>
          </div>
        </div>
        <p class="meta">Note: Totals are based on all entries, not just the current month.</p>
      </section>

      <section id="add-entries">
        <h2>Add Entries (Expense & Care Hours)</h2>
        <p>Use <strong>Add Entry</strong> to log money spent or time contributed.</p>
        <div class="grid-two">
          <div class="card">
            <h4>Expense entry</h4>
            <ol>
              <li>Select <strong>Expense</strong></li>
              <li>Enter amount, date, and description</li>
              <li>Pick a category (or let AI suggest one)</li>
              <li>Optional: scan a receipt</li>
            </ol>
          </div>
          <div class="card">
            <h4>Care hours entry</h4>
            <ol>
              <li>Select <strong>Care Hours</strong></li>
              <li>Enter duration in hours</li>
              <li>Add a description and category</li>
              <li>Value is auto-calculated</li>
            </ol>
          </div>
        </div>
        <div class="callout">
          <strong>Receipt scanning:</strong> Use the camera icon to capture a receipt. The app extracts amount, date, merchant, and category.
        </div>
        <div class="callout">
          <strong>Voice entry:</strong> Tap the microphone in the entry form to describe what happened. The app fills in the fields for you.
        </div>
      </section>

      <section id="ledger-reports">
        <h2>Ledger & Reports</h2>
        <p>The Ledger & Reports view provides a full history of transactions.</p>
        <ul>
          <li>Search by description or category</li>
          <li>Filter by Expense vs Care Hours</li>
          <li>Export to CSV for reimbursement or accounting</li>
        </ul>
        <div class="callout warning">
          <strong>Tip:</strong> Export CSV before major changes or when sharing with a care coordinator.
        </div>
      </section>

      <section id="care-schedule">
        <h2>Care Schedule</h2>
        <p>Track tasks such as appointments or errands, then convert completed tasks into ledger entries.</p>
        <div class="diagram">
          <svg viewBox="0 0 760 160" width="100%" height="160" aria-label="Task to ledger flow">
            <defs>
              <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="3" orient="auto" markerUnits="strokeWidth">
                <path d="M0,0 L10,3 L0,6 Z" fill="#0d9488" />
              </marker>
            </defs>
            <rect x="20" y="40" width="160" height="60" rx="12" fill="#ffffff" stroke="#e2e8f0" />
            <text x="100" y="75" text-anchor="middle" fill="#0f172a" font-size="14">Create task</text>
            <rect x="240" y="40" width="170" height="60" rx="12" fill="#ffffff" stroke="#e2e8f0" />
            <text x="325" y="75" text-anchor="middle" fill="#0f172a" font-size="14">Assign caregiver</text>
            <rect x="470" y="40" width="160" height="60" rx="12" fill="#ffffff" stroke="#e2e8f0" />
            <text x="550" y="75" text-anchor="middle" fill="#0f172a" font-size="14">Complete task</text>
            <rect x="650" y="40" width="90" height="60" rx="12" fill="#ffffff" stroke="#e2e8f0" />
            <text x="695" y="75" text-anchor="middle" fill="#0f172a" font-size="14">Log</text>
            <line x1="180" y1="70" x2="240" y2="70" stroke="#0d9488" stroke-width="2" marker-end="url(#arrow)" />
            <line x1="410" y1="70" x2="470" y2="70" stroke="#0d9488" stroke-width="2" marker-end="url(#arrow)" />
            <line x1="630" y1="70" x2="650" y2="70" stroke="#0d9488" stroke-width="2" marker-end="url(#arrow)" />
          </svg>
          <div class="caption">Figure 3: Care Schedule workflow</div>
        </div>
      </section>

      <section id="help-calendar">
        <h2>Help Calendar</h2>
        <p>Use Help Calendar to request help from family members and claim available tasks.</p>
        <ul>
          <li>Create help requests with date, time slot, and category</li>
          <li>Filter by available, mine, or completed</li>
          <li>Mark completed items and log them to the ledger as care hours</li>
        </ul>
      </section>

      <section id="recurring">
        <h2>Recurring Expenses</h2>
        <p>Automate regular expenses like prescriptions, utilities, or home care.</p>
        <ul>
          <li>Set frequency (weekly, biweekly, monthly, quarterly)</li>
          <li>Pause or resume recurring items</li>
          <li>Log a due item to the ledger with one click</li>
        </ul>
      </section>

      <section id="medications">
        <h2>Medications</h2>
        <p>Track medications, refills, and adherence.</p>
        <ul>
          <li>Add name, dosage, frequency, pharmacy, and monthly cost</li>
          <li>Log taken, skipped, or late doses</li>
          <li>See refills due soon</li>
        </ul>
      </section>

      <section id="ask-kin">
        <h2>Ask Kin (AI Assistant)</h2>
        <p>Ask Kin answers questions about your ledger and can search the web for external information.</p>
        <div class="figure">
          <img src="chat.png" alt="Ask Kin AI assistant interface">
          <div class="caption">Figure 3: Ask Kin AI assistant with suggested prompts</div>
        </div>
        <ul>
          <li>Ledger questions: "How much did we spend on medical supplies this month?"</li>
          <li>Local resources: "Find 24-hour pharmacies near me"</li>
          <li>Summaries: "Draft a care summary for the doctor"</li>
        </ul>
        <div class="callout warning">
          <strong>Privacy:</strong> When Privacy Mode is on, names, emails, phone numbers, and SSN patterns are scrubbed before AI requests.
        </div>
        <div class="callout warning">
          <strong>Compliance mode:</strong> Ask Kin may be disabled in HIPAA-ready deployments unless an AI vendor with a BAA is configured.
        </div>
      </section>

      <section id="medicaid">
        <h2>Medicaid Look-Back Auditor</h2>
        <p>The Medicaid Auditor uses AI to flag ledger entries that may require documentation during a 5-year look-back review.</p>
        <ul>
          <li>Classifies entries as COMPLIANT, WARNING, or REVIEW_NEEDED</li>
          <li>Suggests categories for ambiguous transactions</li>
          <li>Supports Privacy Mode when enabled</li>
        </ul>
        <div class="callout warning">
          <strong>Important:</strong> This is informational and not legal advice. Always consult a qualified elder law attorney.
        </div>
      </section>

      <section id="vault">
        <h2>Document Vault & Emergency Mode</h2>
        <p>Store important documents such as power of attorney, insurance cards, or medication lists.</p>
        <ul>
          <li>Upload files to the vault (stored locally in your browser)</li>
          <li>View or download documents on demand</li>
          <li>Emergency Mode provides a high-contrast, responder-friendly view</li>
        </ul>
        <div class="callout danger">
          <strong>Emergency Access:</strong> Requires your PIN. This prototype does not support PIN bypass. Emergency access events are logged.
        </div>
        <div class="callout">
          <strong>Tip:</strong> If you want medications visible during emergencies, upload a current medication list in the Vault.
        </div>
      </section>

      <section id="family">
        <h2>Family Circle & Roles</h2>
        <p>Invite family members and define roles.</p>
        <ul>
          <li>Create an invite to generate a shareable link and code</li>
          <li>Track invite status (pending, accepted, declined)</li>
          <li>Roles control permissions for editing and settings</li>
        </ul>
        <div class="callout">
          <strong>Prototype note:</strong> Invites are tracked locally in this version. Joining flows depend on your deployment and may be handled outside the app.
        </div>
        <table class="table">
          <thead>
            <tr>
              <th>Role</th>
              <th>Capabilities</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Admin</td>
              <td>Full access, settings, data reset, invites</td>
            </tr>
            <tr>
              <td>Contributor</td>
              <td>Create entries and tasks, export data</td>
            </tr>
            <tr>
              <td>Viewer</td>
              <td>Read-only access</td>
            </tr>
          </tbody>
        </table>
      </section>

      <section id="settings">
        <h2>Settings, Privacy & Security</h2>
        <p>Settings control appearance, security, and data management.</p>
        <table class="table">
          <thead>
            <tr>
              <th>Feature</th>
              <th>How it works</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Theme</td>
              <td>System, Light, or Dark per device</td>
            </tr>
            <tr>
              <td>PIN + Encryption</td>
              <td>PIN enables local encryption of stored data</td>
            </tr>
            <tr>
              <td>Auto-lock</td>
              <td>Locks after 5 minutes of inactivity when PIN is set</td>
            </tr>
            <tr>
              <td>Privacy Mode</td>
              <td>Scrubs names, emails, phone numbers, SSN patterns before AI use</td>
            </tr>
            <tr>
              <td>Security Logs</td>
              <td>Local audit log of security-relevant events</td>
            </tr>
          </tbody>
        </table>
        <div class="callout warning">
          <strong>Compliance mode:</strong> Privacy Mode and Auto-lock are enforced and cannot be turned off.
        </div>
      </section>

      <section id="compliance-mode">
        <h2>Compliance Mode (HIPAA-ready)</h2>
        <p>Compliance Mode is intended for HIPAA-oriented deployments and enforces stricter defaults.</p>
        <ul>
          <li>Privacy Mode is always on (PII is scrubbed before AI use)</li>
          <li>Auto-lock is always on (requires a PIN)</li>
          <li>AI features are disabled by default unless a HIPAA-capable AI vendor is configured</li>
          <li>API access requires an auth token in compliance mode</li>
        </ul>
        <div class="callout warning">
          <strong>Important:</strong> Compliance Mode is a configuration baseline, not a full HIPAA certification. You still need BAAs, server-side auth, audit exports, and retention policies.
        </div>
      </section>

      <section id="sync">
        <h2>Data Sync & Backups</h2>
        <p>There are two ways to share or preserve data:</p>
        <ul>
          <li><strong>Manual backup:</strong> Export a JSON backup and import it on another device</li>
          <li><strong>Cloud sync (beta):</strong> One-way migration from local data to cloud (requires Supabase configuration)</li>
        </ul>
        <div class="callout warning">
          <strong>Backup behavior:</strong> Imports merge entries by ID and overwrite settings. Always keep a copy of your latest export.
        </div>
        <div class="callout warning">
          <strong>Compliance note:</strong> Cloud sync should use authenticated users and server-side access controls. Anonymous access is not HIPAA-ready.
        </div>
      </section>

      <section id="troubleshooting">
        <h2>Troubleshooting</h2>
        <ul>
          <li><strong>App looks empty:</strong> You may be in a fresh local profile. Import a backup or run Cloud Sync if configured.</li>
          <li><strong>Forgot PIN:</strong> There is no recovery. You must reset local data (this erases stored content).</li>
          <li><strong>Voice entry not working:</strong> Check microphone permissions and try Chrome or Edge.</li>
          <li><strong>Receipt scanning fails:</strong> Ensure the image is clear, and try again in good lighting.</li>
        </ul>
      </section>

      <section id="disclaimers">
        <h2>Compliance & Disclaimers</h2>
        <div class="callout danger">
          <strong>Not HIPAA compliant:</strong> KinCircle is a prototype and is not approved for storing protected health information in production.
        </div>
        <p><strong>HIPAA-ready deployments:</strong> Require BAAs, formal risk assessment, server-side auth, audit exports, and documented retention policies.</p>
        <p><strong>AI data sharing:</strong> When AI features are enabled, sanitized data may be sent to Google Gemini, and optionally to LightOnOCR if configured.</p>
        <p><strong>No medical or legal advice:</strong> All AI outputs are informational only and should not replace professional guidance.</p>
      </section>
    </main>
  </div>

  <footer>
    KinCircle User Manual v1.2 · Updated January 31, 2026
  </footer>

  <script>
    const sections = document.querySelectorAll('section');
    const navLinks = document.querySelectorAll('.toc-link');

    const onScroll = () => {
      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (window.pageYOffset >= sectionTop - 180) {
          current = section.getAttribute('id');
        }
      });

      navLinks.forEach(link => {
        link.classList.remove('active');
        if (current && link.getAttribute('href').includes(current)) {
          link.classList.add('active');
        }
      });
    };

    window.addEventListener('scroll', onScroll);
    onScroll();
  </script>
</body>
</html>
